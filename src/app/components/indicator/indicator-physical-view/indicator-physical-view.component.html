<div class="container-fluid">
    <div class="row" style="margin-top: 50px;">
        <div class="col-xl-12">
            <div class="card" style="margin-top: 2%;">
                <div class="job-search">
                    <div class="card-header">
                        <h6>Indicator Physically Check Updation</h6>
                    </div>
                    <div class="card-body" [Loader]="loaderService.isLoading | async">
                        <form [formGroup]="indicatorForm">
                            <div class="form-row">
                                <div class="col-md-6 mb-3 form-group">
                                    <label class="col-form-label" for="txtApplicationType">Application Type</label>
                                    <select (change)="GetModules($event.target.value)" class="form-control digits"
                                        formControlName="ApplicationType">
                                        <option value="">Please Select...</option>
                                        <option *ngFor="let a of ApplicationTypes" [value]="a.ApplicationTypeId">
                                            {{a.ApplicationTypeName}}</option>
                                    </select>
                                    <div *ngIf="submit && indicatorForm.controls.ApplicationType.errors?.required"
                                        class="text text-danger mt-1">
                                        Application Type is required</div>
                                </div>
                                <div class="col-md-6 mb-3 form-group">
                                    <label class="col-form-label" for="txtModule">Module</label>
                                    <select (change)="GetCategories($event.target.value)" class="form-control digits"
                                        formControlName="ModuleId">
                                        <option value="">Please Select...</option>
                                        <option *ngFor="let m of ModulesSelected" [value]="m.ModuleId">{{m.ModuleName}}
                                        </option>
                                    </select>
                                    <div *ngIf="submit && indicatorForm.controls.ModuleId.errors?.required"
                                        class="text text-danger mt-1">
                                        ModuleId is required</div>
                                </div>
                                <div class="col-md-6 mb-3 form-group">
                                    <label class="col-form-label" for="txtShift">Category</label>
                                    <select (change)="GetHFTypes($event.target.value)" class="form-control digits" formControlName="CategoryId">
                                        <option value="">Please Select...</option>
                                        <option *ngFor="let m of CategoriesSelected" [value]="m.CategoryId">
                                            {{m.CategoryName}}
                                        </option>
                                    </select>
                                    <div *ngIf="submit && indicatorForm.controls.CategoryId.errors?.required"
                                        class="text text-danger mt-1">
                                        Category is required</div>
                                </div>
                                <div class="col-md-6 mb-3 form-group">
                                    <label class="col-form-label" for="txtShift">HF Type</label>
                                    <select (change)="GetShifts($event.target.value)" class="form-control digits" formControlName="HfTypeId">
                                        <option value="">Please Select...</option>
                                        <option *ngFor="let m of HealthFacilityTypeFiltered" [value]="m.FacilityTypeId">
                                            {{m.FaciltyTypeName}}
                                        </option>
                                    </select>
                                    <div *ngIf="submit && indicatorForm.controls.HfTypeId.errors?.required"
                                        class="text text-danger mt-1">
                                        HF Type is required</div>
                                </div>
                                <div class="col-md-6 mb-3 form-group">
                                    <label class="col-form-label" for="txtShift">Shift</label>
                                    <select class="form-control digits" formControlName="ShiftId">
                                        <option value="">Please Select...</option>
                                        <option *ngFor="let m of ShiftsFiltered" [value]="m.ShiftId">
                                            {{m.ShiftName}}
                                        </option>
                                    </select>
                                    <div *ngIf="submit && indicatorForm.controls.ShiftId.errors?.required"
                                        class="text text-danger mt-1">
                                        Shift is required</div>
                                </div>
                                <div class="form-group" style="margin-top: 3.5%;margin-left: 39%;">
                                    <button class="btn btn-primary" (click)="search()">Search</button>
                                </div>
                            </div>
                            <div class="row" *ngIf="indicatorList.length > 0">
                                <div class="col-md-12">
                                    <table class="table table-bordered">
                                        <tr>
                                            <td>Sr No.</td>
                                            <td>Question</td>
                                            <td>Physically Check</td>
                                        </tr>
                                        <tbody>
                                            <tr *ngFor="let indicator of indicatorList; let i = index">
                                                <td>{{i+1}}</td>
                                                <td>{{indicator.Question}}</td>
                                                <td><span class="checkbox">
                                                        <input id="{{indicator.IndicatorId}}"
                                                            value="indicator.IsPhysicalView" type="checkbox"
                                                            [attr.checked]="indicator.IsPhysicalView === true ? true : null"
                                                            (change)="UpdatePhysicalView(indicator.IndicatorId)">
                                                        <label for="{{indicator.IndicatorId}}"></label>
                                                    </span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="form-group" *ngIf="indicatorList.length > 0"
                                style="margin-top: 2%;text-align: right;">

                                <button class="btn btn-primary" (click)="save()">Save</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>